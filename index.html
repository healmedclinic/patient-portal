<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wellness Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.10.1/main.min.css">
    <style>
        body { font-family: 'Arial', sans-serif; }
        .hidden { display: none !important; }
        .dashboard-section { min-height: calc(100vh - 4rem); /* Adjust based on header height */ }
        .sidebar { width: 250px; }
        .content-area { margin-left: 250px; }
        /* Modal styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border-radius: 8px;
            width: 80%;
            max-width: 500px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            position: relative;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .test-card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }
        .test-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }
        .test-card h3 {
            font-weight: bold;
            margin-bottom: 8px;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="loginScreenLayout" class="min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-md w-full space-y-8">
            <div id="loginSection">
                <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">
                    Sign in to your account
                </h2>
                <form class="mt-8 space-y-6" id="loginForm">
                    <input type="hidden" name="remember" value="true">
                    <div class="rounded-md shadow-sm -space-y-px">
                        <div>
                            <input id="loginEmail" name="email" type="email" autocomplete="email" required class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Email address">
                        </div>
                        <div>
                            <input id="loginPassword" name="password" type="password" autocomplete="current-password" required class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Password">
                        </div>
                    </div>
                    <div id="loginMessage" class="text-red-500 text-sm mt-2 hidden"></div>
                    <div>
                        <button type="submit" id="loginBtn" class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Sign in
                        </button>
                    </div>
                </form>
                <div class="mt-6">
                    <button id="showSignupBtn" class="w-full py-2 px-4 border border-transparent text-sm font-medium rounded-md text-indigo-600 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        Don't have an account? Sign up
                    </button>
                    <button id="showAdminLoginBtn" class="mt-2 w-full py-2 px-4 border border-transparent text-sm font-medium rounded-md text-gray-700 bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
                        Admin Login
                    </button>
                </div>
            </div>

            <div id="signupSection" class="hidden">
                <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">
                    Create a new account
                </h2>
                <form class="mt-8 space-y-6" id="signupForm">
                    <div>
                        <input id="signupEmail" name="email" type="email" autocomplete="email" required class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Email address">
                    </div>
                    <div>
                        <input id="signupPassword" name="password" type="password" autocomplete="new-password" required class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Password">
                    </div>
                     <div>
                        <input id="signupConfirmPassword" name="confirm-password" type="password" autocomplete="new-password" required class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Confirm Password">
                    </div>
                    <div id="signupMessage" class="text-red-500 text-sm mt-2 hidden"></div>
                    <div>
                        <button type="submit" id="signupBtn" class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Sign up
                        </button>
                    </div>
                </form>
                <div class="mt-6">
                    <button id="backToLoginBtn" class="w-full py-2 px-4 border border-transparent text-sm font-medium rounded-md text-indigo-600 bg-indigo-100 hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        Back to Login
                    </button>
                </div>
            </div>

            <div id="adminLoginSection" class="hidden">
                <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">
                    Admin Sign In
                </h2>
                <form class="mt-8 space-y-6" id="adminLoginForm">
                    <div>
                        <input id="adminEmail" name="email" type="email" autocomplete="email" required class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Admin Email address">
                    </div>
                    <div>
                        <input id="adminPassword" name="password" type="password" autocomplete="current-password" required class="appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm" placeholder="Admin Password">
                    </div>
                    <div id="adminLoginMessage" class="text-red-500 text-sm mt-2 hidden"></div>
                    <div>
                        <button type="submit" id="adminLoginBtn" class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Admin Sign in
                        </button>
                    </div>
                </form>
                <div class="mt-6">
                    <button id="backToPatientLoginBtn" class="w-full py-2 px-4 border border-transparent text-sm font-medium rounded-md text-green-600 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        Back to Patient Login
                    </button>
                </div>
            </div>

            <div class="mt-8">
                <h3 class="text-center text-xl font-bold text-gray-900">Public Access</h3>
                <div class="mt-4 space-y-4">
                    <button id="publicTmsQuestionnaireBtn" class="w-full py-3 px-4 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        TMS Questionnaire (Public)
                    </button>
                    <button id="publicMentalHealthTestsBtn" class="w-full py-3 px-4 border border-transparent text-base font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500">
                        Mental Health Tests (Public)
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="publicMentalHealthTestsSection" class="hidden min-h-screen bg-gray-100 p-8">
        <div class="max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Public Mental Health Tests</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="test-card bg-blue-50 hover:bg-blue-100" data-test-type="GAD7">
                    <h3>GAD-7 Anxiety Test</h3>
                    <p class="text-gray-600 text-sm">Generalized Anxiety Disorder 7-item scale.</p>
                </div>
                <div class="test-card bg-green-50 hover:bg-green-100" data-test-type="PHQ9">
                    <h3>PHQ-9 Depression Test</h3>
                    <p class="text-gray-600 text-sm">Patient Health Questionnaire 9-item scale.</p>
                </div>
                <div class="test-card bg-yellow-50 hover:bg-yellow-100" data-test-type="PCL5">
                    <h3>PCL-5 PTSD Test</h3>
                    <p class="text-gray-600 text-sm">PTSD Checklist for DSM-5.</p>
                </div>
                <div class="test-card bg-red-50 hover:bg-red-100" data-test-type="AUDIT">
                    <h3>AUDIT Alcohol Use Test</h3>
                    <p class="text-gray-600 text-sm">Alcohol Use Disorders Identification Test.</p>
                </div>
            </div>
            <button id="backToPublicAccessBtn" class="mt-8 py-2 px-4 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300">
                Back to Public Access Options
            </button>
        </div>
    </div>

    <div id="patientDashboard" class="hidden min-h-screen flex">
        <div class="sidebar bg-gray-800 text-white flex flex-col py-6">
            <h2 class="text-2xl font-bold px-4 mb-8">Patient Hub</h2>
            <ul id="patientSidebarNav" class="space-y-2 flex-grow">
                <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="dashboardSummary">Dashboard</li>
                <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="appointments">Appointments</li>
                <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="mentalHealthSection">Mental Health Tests</li>
                <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="tmsQuestionnaireWrapper">TMS Daily Questionnaire</li>
                <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="tmsHistory">TMS History</li>
                 <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="testResultsHistory">Test Results History</li>
            </ul>
            <button id="patientLogoutBtn" class="mt-auto px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md mx-4 mb-4">Logout</button>
        </div>

        <div class="content-area flex-1 p-8 overflow-y-auto">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Welcome, <span id="patientDisplayName"></span>!</h1>

            <div id="dashboardSummary" class="dashboard-section">
                <h2 class="text-2xl font-semibold mb-4">Dashboard Summary</h2>
                <div class="bg-white p-6 rounded-lg shadow mb-6">
                    <h3 class="text-xl font-semibold mb-4">Upcoming Appointments</h3>
                    <div id="upcomingAppointmentsList" class="space-y-2">
                        <p class="text-gray-600">No upcoming appointments.</p>
                    </div>
                </div>
                 <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold mb-4">Latest Test Results</h3>
                    <div id="latestTestResults" class="space-y-2">
                        <p class="text-gray-600">No recent test results.</p>
                    </div>
                </div>
            </div>

            <div id="appointmentsSection" class="dashboard-section hidden">
                <h2 class="text-2xl font-semibold mb-4">Your Appointments</h2>
                <button id="showBookingFormBtn" class="mb-6 py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">Request New Appointment</button>

                <div id="appointmentBookingForm" class="hidden bg-white p-6 rounded-lg shadow mb-6">
                    <h3 class="text-xl font-semibold mb-4">Request a New Appointment</h3>
                    <form class="space-y-4">
                        <div>
                            <label for="appointmentDate" class="block text-sm font-medium text-gray-700">Preferred Date</label>
                            <input type="date" id="appointmentDate" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                        </div>
                        <div>
                            <label for="appointmentTime" class="block text-sm font-medium text-gray-700">Preferred Time</label>
                            <input type="time" id="appointmentTime" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                        </div>
                        <div>
                            <label for="appointmentReason" class="block text-sm font-medium text-gray-700">Reason for Appointment</label>
                            <textarea id="appointmentReason" rows="3" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"></textarea>
                        </div>
                        <div id="bookingMessage" class="text-red-500 text-sm hidden"></div>
                        <div class="flex space-x-4">
                            <button type="button" id="submitAppointmentRequestBtn" class="py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700">Submit Request</button>
                            <button type="button" id="hideBookingFormBtn" class="py-2 px-4 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400">Cancel</button>
                        </div>
                    </form>
                </div>

                <div class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold mb-4">Your Booked Appointments</h3>
                    <div id="patientAppointmentsList" class="space-y-4">
                        <p class="text-gray-600">You have no booked appointments.</p>
                    </div>
                </div>
            </div>

            <div id="mentalHealthSection" class="dashboard-section hidden">
                <h2 class="text-2xl font-semibold mb-4">Mental Health Tests</h2>
                <p class="mb-6 text-gray-700">Choose a test to start assessing your mental well-being.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="test-card bg-blue-50 hover:bg-blue-100" data-test-type="GAD7">
                        <h3>GAD-7 Anxiety Test</h3>
                        <p class="text-gray-600 text-sm">Generalized Anxiety Disorder 7-item scale.</p>
                    </div>
                    <div class="test-card bg-green-50 hover:bg-green-100" data-test-type="PHQ9">
                        <h3>PHQ-9 Depression Test</h3>
                        <p class="text-gray-600 text-sm">Patient Health Questionnaire 9-item scale.</p>
                    </div>
                    <div class="test-card bg-yellow-50 hover:bg-yellow-100" data-test-type="PCL5">
                        <h3>PCL-5 PTSD Test</h3>
                        <p class="text-gray-600 text-sm">PTSD Checklist for DSM-5.</p>
                    </div>
                     <div class="test-card bg-red-50 hover:bg-red-100" data-test-type="AUDIT">
                        <h3>AUDIT Alcohol Use Test</h3>
                        <p class="text-gray-600 text-sm">Alcohol Use Disorders Identification Test.</p>
                    </div>
                </div>
                 <div id="testFormContainer" class="hidden mt-8 bg-white p-6 rounded-lg shadow">
                    <h3 id="testTitle" class="text-xl font-semibold mb-4"></h3>
                    <form id="currentTestForm" class="space-y-4">
                        </form>
                    <div id="testMessage" class="text-red-500 text-sm mt-4 hidden"></div>
                    <div class="flex space-x-4 mt-6">
                        <button id="submitTestBtn" class="py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700">Submit Test</button>
                        <button id="cancelTestBtn" class="py-2 px-4 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400">Cancel</button>
                    </div>
                </div>
            </div>

            <div id="tmsQuestionnaireWrapper" class="dashboard-section hidden">
                <h2 class="text-2xl font-semibold mb-4">TMS Daily Questionnaire</h2>
                <div id="tmsQuestionnaireForm" class="bg-white p-6 rounded-lg shadow">
                    <p class="mb-4 text-gray-700">Please answer the following questions honestly.</p>
                    <form class="space-y-4">
                        <div class="form-group">
                            <label for="tmsQ1Mood" class="block text-sm font-medium text-gray-700 mb-2">1. On a scale of 1-10 (1=worst, 10=best), how would you rate your mood today?</label>
                            <input type="range" id="tmsQ1Mood" name="mood" min="1" max="10" value="5" class="w-full h-2 bg-blue-100 rounded-lg appearance-none cursor-pointer range-lg">
                            <span id="tmsQ1MoodValue" class="block text-center text-lg font-bold mt-2">5</span>
                        </div>

                        <div class="form-group">
                            <label for="tmsQAlcohol" class="block text-sm font-medium text-gray-700">Have you consumed alcohol today?</label>
                            <select id="tmsQAlcohol" name="alcohol" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                                <option value="">Select an option</option>
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="tmsQSubstances" class="block text-sm font-medium text-gray-700">Have you taken any substances not prescribed by a doctor (e.g., recreational drugs, unprescribed opioids/benzos)?</label>
                            <select id="tmsQSubstances" name="substances" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                                <option value="">Select an option</option>
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>
                        <div id="tmsQSubstancesFollowUp" class="form-group hidden ml-4 mt-2">
                            <label for="tmsQSubstancesDetails" class="block text-sm font-medium text-gray-700">If yes, please specify which substances and approximately how much:</label>
                            <textarea id="tmsQSubstancesDetails" name="substancesDetails" rows="2" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"></textarea>
                        </div>


                        <div class="form-group">
                            <label for="tmsQ2Sleep" class="block text-sm font-medium text-gray-700">2. Approximately how many hours did you sleep last night?</label>
                            <input type="number" id="tmsQ2Sleep" name="sleep" min="0" max="24" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                        </div>

                        <div class="form-group">
                            <label for="tmsQ3SideEffects" class="block text-sm font-medium text-gray-700">3. Have you experienced any new or worsening side effects from your TMS treatment today?</label>
                            <select id="tmsQ3SideEffects" name="sideEffects" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                                <option value="">Select an option</option>
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                            <textarea id="tmsQ3OptionalLongAnswer" name="q3OptionalLongAnswer" rows="3" class="mt-2 block w-full border border-gray-300 rounded-md shadow-sm p-2 hidden" placeholder="Optional: Please provide more details about side effects or other concerns..."></textarea>
                        </div>


                        <div id="tmsQ3FollowUp" class="form-group hidden ml-4 mt-2">
                            <label for="tmsQ3SideEffectsDetails" class="block text-sm font-medium text-gray-700">If yes, please describe the side effects:</label>
                            <textarea id="tmsQ3SideEffectsDetails" name="sideEffectsDetails" rows="2" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="tmsQ4Suicidal" class="block text-sm font-medium text-gray-700">4. Are you currently experiencing any thoughts of harming yourself?</label>
                            <select id="tmsQ4Suicidal" name="suicidal" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                                <option value="">Select an option</option>
                                <option value="yes">Yes</option>
                                <option value="no">No</option>
                            </select>
                        </div>
                        <div id="tmsQ4FollowUp" class="form-group hidden ml-4 mt-2">
                            <p class="text-red-600 font-bold">Please inform your provider immediately or seek emergency care if these thoughts are severe or you have a plan.</p>
                            <label for="tmsQ4SuicidalDetails" class="block text-sm font-medium text-gray-700">If yes, please provide details:</label>
                            <textarea id="tmsQ4SuicidalDetails" name="suicidalDetails" rows="2" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"></textarea>
                        </div>

                        <div id="tmsQuestionnaireMessage" class="text-red-500 text-sm hidden"></div>
                        <div class="flex space-x-4 mt-6">
                            <button type="button" id="submitTmsQuestionnaireBtn" class="py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700">Submit Questionnaire</button>
                            <button type="button" id="cancelTmsQuestionnaireBtn" class="py-2 px-4 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="tmsHistory" class="dashboard-section hidden">
                <h2 class="text-2xl font-semibold mb-4">Your TMS Daily Questionnaire History</h2>
                <div id="tmsHistoryList" class="bg-white p-6 rounded-lg shadow">
                    <p class="text-gray-600">No TMS questionnaire entries found.</p>
                    </div>
            </div>

            <div id="testResultsHistory" class="dashboard-section hidden">
                <h2 class="text-2xl font-semibold mb-4">Your Mental Health Test Results History</h2>
                <div id="testResultsHistoryList" class="bg-white p-6 rounded-lg shadow">
                    <p class="text-gray-600">No test results entries found.</p>
                    </div>
            </div>

        </div>
    </div>

    <div id="adminDashboard" class="hidden min-h-screen flex">
        <div class="sidebar bg-gray-800 text-white flex flex-col py-6">
            <h2 class="text-2xl font-bold px-4 mb-8">Admin Panel</h2>
            <ul id="adminSidebarNav" class="space-y-2 flex-grow">
                <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="adminSummary">Dashboard</li>
                <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="adminPatients">Patients</li>
                <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="adminAppointments">Appointments Calendar</li>
                <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="adminTestResults">Test Results</li>
                <li class="px-4 py-2 hover:bg-gray-700 cursor-pointer" data-section="adminTmsQuestionnaires">TMS Questionnaires</li>
            </ul>
            <button id="adminLogoutBtn" class="mt-auto px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md mx-4 mb-4">Logout</button>
        </div>

        <div class="content-area flex-1 p-8 overflow-y-auto">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">Admin Dashboard</h1>

            <div id="adminSummary" class="dashboard-section">
                <h2 class="text-2xl font-semibold mb-4">Overview</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-xl font-semibold mb-4">Total Patients</h3>
                        <p id="totalPatientsCount" class="text-3xl font-bold text-indigo-600">0</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow">
                        <h3 class="text-xl font-semibold mb-4">Pending Appointments</h3>
                        <p id="pendingAppointmentsCount" class="text-3xl font-bold text-yellow-600">0</p>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-lg shadow mt-6">
                    <h3 class="text-xl font-semibold mb-4">Recent Activity</h3>
                    <ul id="adminRecentActivityList" class="list-disc pl-5 text-gray-700">
                        <li>No recent activity.</li>
                    </ul>
                </div>
            </div>

            <div id="adminPatients" class="dashboard-section hidden">
                <h2 class="text-2xl font-semibold mb-4">Manage Patients</h2>
                <button id="showAddPatientFormBtn" class="mb-6 py-2 px-4 bg-indigo-600 text-white rounded-md hover:bg-indigo-700">Add New Patient</button>

                <div id="addPatientForm" class="hidden bg-white p-6 rounded-lg shadow mb-6">
                    <h3 class="text-xl font-semibold mb-4">Add New Patient</h3>
                    <form class="space-y-4">
                        <div>
                            <label for="newPatientEmail" class="block text-sm font-medium text-gray-700">Email</label>
                            <input type="email" id="newPatientEmail" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                        </div>
                        <div>
                            <label for="newPatientPassword" class="block text-sm font-medium text-gray-700">Password</label>
                            <input type="password" id="newPatientPassword" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                        </div>
                        <div>
                            <label for="newPatientName" class="block text-sm font-medium text-gray-700">Name</label>
                            <input type="text" id="newPatientName" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" required>
                        </div>
                        <div>
                            <label for="newPatientDob" class="block text-sm font-medium text-gray-700">Date of Birth</label>
                            <input type="date" id="newPatientDob" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                        </div>
                         <div>
                            <label for="newPatientPhone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                            <input type="tel" id="newPatientPhone" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                        </div>
                        <div id="addPatientMessage" class="text-red-500 text-sm hidden"></div>
                        <div class="flex space-x-4">
                            <button type="button" id="addPatientBtn" class="py-2 px-4 bg-green-600 text-white rounded-md hover:bg-green-700">Add Patient</button>
                            <button type="button" id="hideAddPatientFormBtn" class="py-2 px-4 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400">Cancel</button>
                        </div>
                    </form>
                </div>

                <div id="patientListView" class="bg-white p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold mb-4">All Patients</h3>
                    <input type="text" id="patientSearchInput" placeholder="Search patients by name or email..." class="mb-4 p-2 border border-gray-300 rounded-md w-full">
                    <div id="patientsList" class="space-y-4">
                        <p class="text-gray-600">No patients found.</p>
                    </div>
                </div>

                <div id="patientDetailView" class="hidden bg-white p-6 rounded-lg shadow mt-6">
                    <button id="backToPatientsListBtn" class="mb-4 py-2 px-4 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400">Back to Patients List</button>
                    <h3 class="text-xl font-semibold mb-4">Patient Details: <span id="detailPatientName"></span></h3>
                    <p><strong>Email:</strong> <span id="detailPatientEmail"></span></p>
                    <p><strong>DOB:</strong> <span id="detailPatientDob"></span></p>
                    <p><strong>Phone:</strong> <span id="detailPatientPhone"></span></p>

                    <h4 class="text-lg font-semibold mt-6 mb-2">Appointments</h4>
                    <div id="detailPatientAppointments" class="space-y-2">
                        <p class="text-gray-600">No appointments for this patient.</p>
                    </div>

                    <h4 class="text-lg font-semibold mt-6 mb-2">TMS Questionnaires</h4>
                    <div id="detailPatientTmsQuestionnaires" class="space-y-2">
                        <p class="text-gray-600">No TMS questionnaires for this patient.</p>
                    </div>

                    <h4 class="text-lg font-semibold mt-6 mb-2">Mental Health Test Results</h4>
                    <div id="detailPatientTestResults" class="space-y-2">
                        <p class="text-gray-600">No test results for this patient.</p>
                    </div>
                </div>
            </div>

            <div id="adminAppointments" class="dashboard-section hidden">
                <h2 class="text-2xl font-semibold mb-4">Appointments Calendar</h2>
                <div id='adminCalendar' class="bg-white p-6 rounded-lg shadow"></div>
            </div>

            <div id="adminTestResults" class="dashboard-section hidden">
                <h2 class="text-2xl font-semibold mb-4">View All Test Results</h2>
                <div id="allTestResultsList" class="bg-white p-6 rounded-lg shadow">
                    <p class="text-gray-600">No test results available.</p>
                </div>
            </div>

            <div id="adminTmsQuestionnaires" class="dashboard-section hidden">
                <h2 class="text-2xl font-semibold mb-4">View All TMS Questionnaires</h2>
                <div id="allTmsQuestionnairesList" class="bg-white p-6 rounded-lg shadow">
                    <p class="text-gray-600">No TMS questionnaires available.</p>
                </div>
            </div>

        </div>
    </div>

    <div id="eventDetailsModal" class="modal flex">
        <div class="modal-content">
            <span class="close-button" id="closeModalBtn">&times;</span>
            <h2 id="modalEventTitle" class="text-2xl font-bold mb-4">Appointment Details</h2>
            <p><strong>Patient Name:</strong> <span id="modalPatientName"></span></p>
            <p><strong>Email:</strong> <span id="modalPatientEmail"></span></p>
            <p><strong>Phone:</strong> <span id="modalPatientPhone"></span></p>
            <p><strong>Date & Time:</strong> <span id="modalEventDateTime"></span></p>
            <p><strong>DOB:</strong> <span id="modalEventDob"></span></p>
            <p><strong>Reason:</strong> <span id="modalEventReason"></span></p>
            <p><strong>Status:</strong> <span id="modalEventStatus" class="font-bold"></span></p>
            </div>
    </div>

    <div id="tmsDetailModal" class="modal flex">
        <div class="modal-content">
            <span class="close-button" id="closeTmsModalBtn">&times;</span>
            <h2 class="text-2xl font-bold mb-4">TMS Questionnaire Details</h2>
            <p><strong>Date Submitted:</strong> <span id="tmsModalDate"></span></p>
            <p><strong>Mood Rating:</strong> <span id="tmsModalMood"></span>/10</p>
            <p><strong>Sleep (hours):</strong> <span id="tmsModalSleep"></span></p>
            <p><strong>Alcohol Consumed:</strong> <span id="tmsModalAlcohol"></span></p>
            <p><strong>Unprescribed Substances:</strong> <span id="tmsModalSubstances"></span></p>
            <div id="tmsModalSubstancesDetailsGroup" class="ml-4 hidden">
                <p><strong>Substances Details:</strong> <span id="tmsModalSubstancesDetails"></span></p>
            </div>
            <p><strong>Experienced Side Effects:</strong> <span id="tmsModalSideEffects"></span></p>
            <div id="tmsModalSideEffectsDetailsGroup" class="ml-4 hidden">
                <p><strong>Side Effects Details:</strong> <span id="tmsModalSideEffectsDetails"></span></p>
            </div>
            <p><strong>Optional Concerns:</strong> <span id="tmsModalOptionalConcerns"></span></p>
            <p><strong>Thoughts of Harming Self:</strong> <span id="tmsModalSuicidal"></span></p>
            <div id="tmsModalSuicidalDetailsGroup" class="ml-4 hidden">
                <p><strong>Suicidal Details:</strong> <span id="tmsModalSuicidalDetails"></span></p>
            </div>
        </div>
    </div>

    <div id="publicTestDetailModal" class="modal flex">
        <div class="modal-content">
            <span class="close-button" id="closePublicTestModalBtn">&times;</span>
            <h2 id="publicTestModalTitle" class="text-2xl font-bold mb-4">Mental Health Test Results</h2>
            <p><strong>Test Type:</strong> <span id="publicTestModalType"></span></p>
            <p><strong>Date Submitted:</strong> <span id="publicTestModalDate"></span></p>
            <p><strong>Score:</strong> <span id="publicTestModalScore"></span></p>
            <p><strong>Interpretation:</strong> <span id="publicTestModalInterpretation"></span></p>
            <p><strong>Name Provided:</strong> <span id="publicTestModalName"></span></p>
            <p><strong>Email Provided:</strong> <span id="publicTestModalEmail"></span></p>
            <p><strong>Phone Provided:</strong> <span id="publicTestModalPhone"></span></p>
            <p><strong>DOB Provided:</strong> <span id="publicTestModalDob"></span></p>
        </div>
    </div>


    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.10.1/main.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
